# ç›´æ’­è¾©è®ºç³»ç»Ÿ

## ğŸ“Œ åŸºæœ¬ä¿¡æ¯

- **é¡¹ç›®åç§°**ï¼šç›´æ’­è¾©è®ºç³»ç»Ÿï¼ˆlive-debateï¼‰
- **è¯´æ˜**ï¼šç›´æ’­è¾©è®ºå°ç¨‹åº/åå°ï¼Œå¤šç›´æ’­æµç®¡ç†ã€æŠ•ç¥¨ã€è¯„å§”ã€è¾©é¢˜ã€æ•°æ®ç»Ÿè®¡ï¼Œæ”¯æŒ H5 ä¸å¾®ä¿¡å°ç¨‹åºã€‚åç«¯ Spring Boot æä¾› API ä¸ WebSocketï¼ŒNode ä¸­é—´å±‚æä¾›åå°é¡µé¢ä¸é™æ€èµ„æºå¹¶ä»£ç† `/api` åˆ°åç«¯ã€‚

---

## ğŸš€ æ¼”ç¤ºåœ°å€ï¼ˆRender éƒ¨ç½²ï¼‰

- **å‰ç«¯ / åå°**ï¼š`https://live-debate.onrender.com/admin`ï¼ˆæœ¬åœ°ï¼š`http://localhost:8080/admin`ï¼‰  
  _éƒ¨ç½²åè¯·å°† `live-debate` æ›¿æ¢ä¸ºä½ åœ¨ Render åˆ›å»ºçš„å‰ç«¯/ç½‘å…³æœåŠ¡åç§°ã€‚_
- **åç«¯ API**ï¼šä¸å‰ç«¯åŒåŸŸæ—¶ä¸º `https://live-debate.onrender.com/api`ï¼›è‹¥åç«¯å•ç‹¬éƒ¨ç½²åˆ™ä¸º `https://live-debate-api.onrender.com/api`ï¼ˆæœ¬åœ°ï¼š`http://localhost:8000/api`ï¼‰  
  _åç«¯å•ç‹¬éƒ¨ç½²æ—¶ï¼Œè¯·å°† `live-debate-api` æ›¿æ¢ä¸ºä½ çš„ Spring Boot æœåŠ¡åç§°ã€‚_

---

## ğŸ§± æŠ€æœ¯æ ˆè¯´æ˜

- **åç«¯æ¡†æ¶**ï¼šJava + Spring Bootï¼ˆç«¯å£ 8000ï¼‰ï¼Œæä¾› REST API ä¸ WebSocketï¼›ä¸ Node ä¸­é—´å±‚é…åˆï¼Œç”±ç½‘å…³ï¼ˆ8080ï¼‰ä»£ç† `/api` åˆ°åç«¯ã€‚
- **Mock æ•°æ®ç”Ÿæˆæ–¹æ¡ˆ**ï¼š**ä»£ç æ¨¡æ‹Ÿ**ã€‚åç«¯ä½¿ç”¨ `MockDataService`ï¼ˆå†…å­˜çŠ¶æ€ï¼šç›´æ’­æµã€æŠ•ç¥¨ã€ç”¨æˆ·ã€è¾©é¢˜ã€AI å†…å®¹ã€è¾©è®ºæµç¨‹ç­‰ï¼‰ï¼Œæ—  Faker.jsï¼Œæ— ç‹¬ç«‹ JSON æ–‡ä»¶ï¼›Node å±‚å¯é€‰æœ¬åœ° JSONï¼ˆ`frontend/data/*.json`ï¼‰+ `admin/db.js` åšåå°ç®¡ç†æ•°æ®ã€‚
- **éƒ¨ç½²å¹³å°ä¸æ–¹å¼**ï¼šRenderï¼ˆWeb Serviceï¼‰éƒ¨ç½² Node ç½‘å…³æˆ– Spring Boot åç«¯ï¼›è‡ªå»ºæœåŠ¡å™¨å¯ç”¨ PM2 è·‘ Nodeã€`java -jar` è·‘ Spring Bootã€‚

---

## ğŸ”— é¡¹ç›®ç»“æ„ä¸æ¥å£è¯´æ˜

### åç«¯ç›®å½•ç»“æ„ï¼ˆSpring Bootï¼‰

```
backend/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ java/com/live/
â”‚       â”‚   â”œâ”€â”€ common/
â”‚       â”‚   â”œâ”€â”€ config/
â”‚       â”‚   â”œâ”€â”€ controller/
â”‚       â”‚   â”œâ”€â”€ service/
â”‚       â”‚   â””â”€â”€ websocket/
â”‚       â””â”€â”€ resources/
â””â”€â”€ pom.xml
```

### ä¸»è¦æ¥å£ï¼ˆåç«¯ Spring Bootï¼‰

è¿”å›æ ¼å¼ç»Ÿä¸€ä¸ºï¼š`{ "code": 0, "message": "success", "data": {...}, "success": true }`ï¼ˆå¤±è´¥æ—¶ `success: false`ï¼Œ`code` é 0ï¼‰ã€‚

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|------|
| æ•°æ®æ¦‚è§ˆ | GET | `/api/v1/admin/dashboard?stream_id=` | è¿”å› mock ä»ªè¡¨ç›˜æ•°æ®ï¼ˆç¥¨æ•°ã€ç›´æ’­çŠ¶æ€ã€è¾©é¢˜ç­‰ï¼‰ |
| ç›´æ’­æµåˆ—è¡¨ | GET | `/api/v1/admin/streams` | è¿”å› mock ç›´æ’­æµåˆ—è¡¨ |
| åˆ›å»ºç›´æ’­æµ | POST | `/api/v1/admin/streams` | åˆ›å»º mock ç›´æ’­æµ |
| æ›´æ–°ç›´æ’­æµ | PUT | `/api/admin/streams/{streamId}` | æ›´æ–°æŒ‡å®šç›´æ’­æµ |
| åˆ é™¤ç›´æ’­æµ | DELETE | `/api/admin/streams/{streamId}` | åˆ é™¤æŒ‡å®šç›´æ’­æµ |
| å¼€å§‹ç›´æ’­ | POST | `/api/v1/admin/live/start` | å¼€å§‹ç›´æ’­ |
| åœæ­¢ç›´æ’­ | POST | `/api/v1/admin/live/stop` | åœæ­¢ç›´æ’­ |
| æ›´æ–°æŠ•ç¥¨ | POST | `/api/v1/admin/live/update-votes` | æ›´æ–°ç¥¨æ•° |
| é‡ç½®æŠ•ç¥¨ | POST | `/api/v1/admin/live/reset-votes` | é‡ç½®ç¥¨æ•° |
| è§‚çœ‹äººæ•° | GET | `/api/v1/admin/live/viewers` | è·å–è§‚çœ‹äººæ•° |
| AI å¯åŠ¨/åœæ­¢/åˆ‡æ¢ | POST | `/api/v1/admin/ai/start`ã€`/stop`ã€`/toggle` | AI æ§åˆ¶ |
| è¾©é¢˜ | GET/POST/PUT | `/api/v1/admin/debates`ã€`/debates/{debateId}` | è·å–/åˆ›å»º/æ›´æ–°è¾©é¢˜ |
| è¾©è®ºæµç¨‹ | GET/POST | `/api/admin/debate-flow`ã€`/debate-flow/control` | è¾©è®ºæµç¨‹é…ç½® |
| ç”¨æˆ·åˆ—è¡¨ï¼ˆå°ç¨‹åºï¼‰ | GET | `/api/admin/miniprogram/users` | è¿”å› mock ç”¨æˆ·æ•°æ® |
| æŠ•ç¥¨ç»Ÿè®¡ | GET | `/api/admin/votes/statistics`ã€`/api/v1/admin/votes/statistics` | è¿”å› mock æŠ•ç¥¨ç»Ÿè®¡ |
| ç”¨æˆ·æŠ•ç¥¨ | POST | `/api/v1/user-vote` | æäº¤æŠ•ç¥¨ï¼ˆmock æ›´æ–°ç¥¨æ•°ï¼‰ |
| è·å–ç¥¨æ•° | GET | `/api/v1/votes?stream_id=` | è¿”å› mock ç¥¨æ•° |
| è·å–è¾©é¢˜ | GET | `/api/v1/debate-topic?stream_id=` | è¿”å› mock è¾©é¢˜ |
| AI å†…å®¹åˆ—è¡¨ | GET | `/api/v1/admin/ai-content/list`ã€`/api/v1/ai-content` | è¿”å› mock AI å†…å®¹ |
| AI å†…å®¹è¯„è®º | GET/DELETE | `/api/v1/admin/ai-content/{contentId}/comments`ã€`/comments/{commentId}` | è¯„è®ºåˆ—è¡¨ä¸åˆ é™¤ |
| ç”¨æˆ·åˆ—è¡¨ï¼ˆAPIï¼‰ | GET/POST | `/api/users` | è·å–/åˆ›å»º mock ç”¨æˆ· |


---

## ğŸ§  é¡¹ç›®å¼€å‘è¿‡ç¨‹ç¬”è®°

### é¡¹ç›®å®ç°æ€è·¯

- åç«¯ç”¨ Spring Boot æä¾›å…¨éƒ¨ä¸šåŠ¡ API ä¸ WebSocketï¼ŒMock æ•°æ®ç”± `MockDataService` åœ¨å†…å­˜ä¸­ç»´æŠ¤ï¼ˆç›´æ’­æµã€æŠ•ç¥¨ã€ç”¨æˆ·ã€è¾©é¢˜ã€AI å†…å®¹ã€è¾©è®ºæµç¨‹ç­‰ï¼‰ï¼Œä¾¿äºåç»­æ›¿æ¢ä¸ºçœŸå®æ•°æ®åº“ã€‚
- Node ä¸­é—´å±‚å¯¹å¤–æä¾›åå°ç®¡ç†é¡µé¢ã€é™æ€èµ„æºï¼Œå¹¶å°† `/api` ä»£ç†åˆ° Spring Bootï¼Œç»Ÿä¸€å…¥å£ã€é¿å…è·¨åŸŸï¼›æœ¬åœ°ä¹Ÿå¯ç”¨ Node å±‚è‡ªå¸¦çš„ JSON + JS åšéƒ¨åˆ†èƒ½åŠ›ã€‚
- å‰ç«¯ï¼šå°ç¨‹åº/H5 é€šè¿‡ç½‘å…³ 8080 è®¿é—® `/api`ï¼›åå°ç®¡ç†ä¸º HTML/JSï¼Œä¸ uni-app å¤šç«¯ï¼ˆH5ã€å¾®ä¿¡å°ç¨‹åºï¼‰åˆ†ç¦»ã€‚

### é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

- **ç«¯å£å ç”¨**ï¼šå¤šæ¬¡å¯åŠ¨å¯¼è‡´ 8080 è¢«å ï¼Œä½¿ç”¨ `PORT=8081` æˆ–å…ˆç»“æŸå ç”¨è¿›ç¨‹ï¼ˆ`netstat -ano | findstr :8080` â†’ `taskkill /PID xxx /F`ï¼‰ã€‚
- **ç½‘å…³ä¸åç«¯è”è°ƒ**ï¼šå¿…é¡»å…ˆå¯åŠ¨ Spring Bootï¼ˆ8000ï¼‰ï¼Œå†å¯åŠ¨ Nodeï¼ˆ8080ï¼‰ï¼Œå¦åˆ™è®¿é—® `/api` ä¼šä»£ç†å¤±è´¥ï¼›ç¯å¢ƒå˜é‡ `BACKEND_URL` å¯æŒ‡å‘åç«¯åœ°å€ã€‚
- **æ•°æ®ç»Ÿè®¡**ï¼šæœªé€‰æ—¥æœŸæ—¶æŒ‰â€œå½“å¤©â€ç»Ÿè®¡ï¼›åŒºé—´æŸ¥è¯¢æ—¶â€œæ´»è·ƒç”¨æˆ·â€å–åŒºé—´å†…å•æ—¥æœ€å¤§å€¼ï¼›æŠ•ç¥¨åˆ†å¸ƒæŒ‰å½“æ—¥æ­£åæ–¹ç¥¨æ•°è®¡ç®—ï¼Œä¿è¯æ­£æ–¹%+åæ–¹%=100%ã€‚

### æœ¬åœ°è”è°ƒç»éªŒ

- **é¡ºåº**ï¼šå…ˆ `cd backend && mvn spring-boot:run`ï¼ˆç«¯å£ 8000ï¼‰ï¼Œå† `cd frontend && npm install && npm start`ï¼ˆç«¯å£ 8080ï¼‰ã€‚
- **è®¿é—®**ï¼šæµè§ˆå™¨æ‰“å¼€ `http://localhost:8080/admin`ï¼›æ‰€æœ‰ `/api` è¯·æ±‚ç”± Node ä»£ç†åˆ° `http://127.0.0.1:8000`ã€‚
- å°ç¨‹åº/H5 å¼€å‘æ—¶å°† API åŸºåœ°å€è®¾ä¸º `http://æœ¬æœºIP:8080`ï¼Œä¿è¯æ‰‹æœºä¸ç”µè„‘åŒç½‘æ®µå¯è®¿é—®ã€‚

### éƒ¨ç½²æ­¥éª¤ä¸è¸©å‘è®°å½•

- **Render éƒ¨ç½² Node ç½‘å…³**ï¼šè¿ GitHub ä»“åº“ï¼ŒRoot ç•™ç©ºï¼›Buildï¼š`cd frontend && npm install`ï¼›Startï¼š`npm start`ï¼ˆfrontend çš„ package.json ä¸­éœ€æœ‰ `"start": "node server.js"`ï¼‰ã€‚Render è‡ªåŠ¨æ³¨å…¥ `PORT`ã€‚
- **Render éƒ¨ç½² Spring Boot**ï¼šå¯å•ç‹¬å»º Web Serviceï¼ŒRoot å¡« `backend`ï¼›Buildï¼š`mvn clean package -DskipTests`ï¼›Startï¼š`java -jar target/live-backend-1.0.0.jar`ï¼ˆä»¥å®é™… jar åä¸ºå‡†ï¼‰ã€‚ç½‘å…³ä¾§è®¾ç½®ç¯å¢ƒå˜é‡ `BACKEND_URL` ä¸º Spring Boot å…¬ç½‘åœ°å€ã€‚
- **è¸©å‘**ï¼šç½‘å…³ä¸åç«¯åˆ†å¼€éƒ¨ç½²æ—¶å¿…é¡»åœ¨ç½‘å…³ä¾§é…ç½® `BACKEND_URL`ï¼›ç«¯å£å ç”¨æ—¶æ”¹ç”¨ `PORT=8081` æˆ–å…ˆç»“æŸå ç”¨è¿›ç¨‹ã€‚

---

## ğŸ§ ä¸ªäººä»‹ç»

- **ä¸»è¯­è¨€**ï¼šJavaã€H5 + CSS3 + JavaScriptã€Python  
- **å¸¸ç”¨æŠ€æœ¯æ ˆ**ï¼šSpring Bootã€Node.jsã€Vue / Djangoã€å‰åç«¯è”è°ƒä¸ç®€å•éƒ¨ç½²  
- **æ“…é•¿æ–¹å‘**ï¼šåˆ¶ä½œç½‘é¡µï¼Œå®Œå–„åŠŸèƒ½
- **å­¦ä¹ ç›®æ ‡**ï¼šå®Œå–„å…¨æ ˆå¼€å‘èƒ½åŠ›ï¼Œç†Ÿæ‚‰æ›´å¤šæ¡†æ¶æŠ€æœ¯æ ˆ
